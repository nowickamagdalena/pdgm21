
import scala.io.StdIn.*

class KalahaGame(var p1: Player, var p2: Player, val board: Board) {

  def player1_ = p1
  def player2_ = p2
  def player1(newPlayer: Player) =
    p1 = newPlayer
  def player2(newPlayer: Player) =
    p2 = newPlayer

  def play(): Unit ={
    var turn = 1
    while(!board.isFinished()){
      board.printBoard()
      var myMove = 0
      if(turn == 1) then
        myMove = p1.chooseMove()
      else
        myMove = p2.chooseMove()
      println("Player " + turn + " choice: " + myMove)

      var nextMove = board.move(turn, myMove)

      while(nextMove && !board.isFinished()){

        println("you have next move")
        board.printBoard()
        if(turn == 1) then
          myMove = p1.chooseMove()
        else
          myMove = p2.chooseMove()
        println("Player " + turn + " choice: " + myMove)
        nextMove = board.move(turn, myMove)

      }
      turn = turn % 2 + 1
    }
  }


}
